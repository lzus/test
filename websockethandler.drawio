<mxfile host="app.diagrams.net" modified="2024-01-19T02:58:28.258Z" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36" etag="DtAlIeCWUzVlLcZyPBQh" version="22.1.18" type="github">
  <diagram name="第 1 页" id="TmWcDYK_UgiakPwoPVKv">
    <mxGraphModel dx="954" dy="526" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="5YAw_FNIZ0tjdUvr30zQ-1" value="&lt;pre style=&quot;background-color:#ffffff;color:#080808;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:9.8pt;&quot;&gt;session = new Session(&lt;span style=&quot;color:#000000;&quot;&gt;state&lt;/span&gt;, &lt;span style=&quot;color:#000000;&quot;&gt;agent&lt;/span&gt;, &lt;span style=&quot;color:#000000;&quot;&gt;remoteCapability&lt;/span&gt;)&lt;/pre&gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="120" y="140" width="500" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5YAw_FNIZ0tjdUvr30zQ-2" value="&lt;pre style=&quot;background-color:#ffffff;color:#080808;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:9.8pt;&quot;&gt;listener = new &lt;span style=&quot;color:#000000;&quot;&gt;Provider&lt;/span&gt;.&lt;span style=&quot;color:#000000;&quot;&gt;Listener&lt;/span&gt;() {&lt;br&gt;    &lt;span style=&quot;color:#0033b3;&quot;&gt;private &lt;/span&gt;&lt;span style=&quot;color:#000000;&quot;&gt;Object &lt;/span&gt;&lt;span style=&quot;color:#871094;&quot;&gt;providerSession&lt;/span&gt;;&lt;br&gt;&lt;br&gt;    &lt;span style=&quot;color:#9e880d;&quot;&gt;@Override&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#9e880d;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color:#0033b3;&quot;&gt;public void &lt;/span&gt;&lt;span style=&quot;color:#00627a;&quot;&gt;onWebSocketConnect&lt;/span&gt;(&lt;span style=&quot;color:#000000;&quot;&gt;Object &lt;/span&gt;providerSession) {&lt;br&gt;        &lt;span style=&quot;color:#0033b3;&quot;&gt;this&lt;/span&gt;.&lt;span style=&quot;color:#871094;&quot;&gt;providerSession &lt;/span&gt;= providerSession;&lt;br&gt;        &lt;span style=&quot;color:#851691;&quot;&gt;session&lt;/span&gt;.startPings();&lt;br&gt;        &lt;span style=&quot;color:#851691;&quot;&gt;session&lt;/span&gt;.opened();&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span style=&quot;color:#9e880d;&quot;&gt;@Override&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#9e880d;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color:#0033b3;&quot;&gt;public &lt;/span&gt;&lt;span style=&quot;color:#000000;&quot;&gt;Object &lt;/span&gt;&lt;span style=&quot;color:#00627a;&quot;&gt;getProviderSession&lt;/span&gt;() {&lt;br&gt;        &lt;span style=&quot;color:#0033b3;&quot;&gt;return &lt;/span&gt;&lt;span style=&quot;color:#871094;&quot;&gt;providerSession&lt;/span&gt;;&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span style=&quot;color:#9e880d;&quot;&gt;@Override&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#9e880d;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color:#0033b3;&quot;&gt;public void &lt;/span&gt;&lt;span style=&quot;color:#00627a;&quot;&gt;onWebSocketClose&lt;/span&gt;(&lt;span style=&quot;color:#0033b3;&quot;&gt;int &lt;/span&gt;statusCode, &lt;span style=&quot;color:#000000;&quot;&gt;String &lt;/span&gt;reason) {&lt;br&gt;        &lt;span style=&quot;color:#851691;&quot;&gt;session&lt;/span&gt;.stopPings();&lt;br&gt;        &lt;span style=&quot;color:#851691;&quot;&gt;session&lt;/span&gt;.closed(statusCode, reason);&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span style=&quot;color:#9e880d;&quot;&gt;@Override&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#9e880d;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color:#0033b3;&quot;&gt;public void &lt;/span&gt;&lt;span style=&quot;color:#00627a;&quot;&gt;onWebSocketError&lt;/span&gt;(&lt;span style=&quot;color:#000000;&quot;&gt;Throwable &lt;/span&gt;cause) {&lt;br&gt;        &lt;span style=&quot;color:#0033b3;&quot;&gt;if &lt;/span&gt;(cause &lt;span style=&quot;color:#0033b3;&quot;&gt;instanceof &lt;/span&gt;&lt;span style=&quot;color:#000000;&quot;&gt;ClosedChannelException&lt;/span&gt;) {&lt;br&gt;            onWebSocketClose(&lt;span style=&quot;color:#1750eb;&quot;&gt;0&lt;/span&gt;, cause.toString());&lt;br&gt;        } &lt;span style=&quot;color:#0033b3;&quot;&gt;else &lt;/span&gt;{&lt;br&gt;            &lt;span style=&quot;color:#851691;&quot;&gt;session&lt;/span&gt;.error(cause);&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span style=&quot;color:#9e880d;&quot;&gt;@Override&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#9e880d;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color:#0033b3;&quot;&gt;public void &lt;/span&gt;&lt;span style=&quot;color:#00627a;&quot;&gt;onWebSocketBinary&lt;/span&gt;(&lt;span style=&quot;color:#0033b3;&quot;&gt;byte&lt;/span&gt;[] payload, &lt;span style=&quot;color:#0033b3;&quot;&gt;int &lt;/span&gt;offset, &lt;span style=&quot;color:#0033b3;&quot;&gt;int &lt;/span&gt;length) {&lt;br&gt;        &lt;span style=&quot;color:#0033b3;&quot;&gt;try &lt;/span&gt;{&lt;br&gt;            &lt;span style=&quot;color:#851691;&quot;&gt;session&lt;/span&gt;.binary(payload, offset, length);&lt;br&gt;        } &lt;span style=&quot;color:#0033b3;&quot;&gt;catch &lt;/span&gt;(&lt;span style=&quot;color:#000000;&quot;&gt;IOException &lt;/span&gt;x) {&lt;br&gt;            &lt;span style=&quot;color:#851691;&quot;&gt;session&lt;/span&gt;.error(x);&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span style=&quot;color:#9e880d;&quot;&gt;@Override&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#9e880d;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color:#0033b3;&quot;&gt;public void &lt;/span&gt;&lt;span style=&quot;color:#00627a;&quot;&gt;onWebSocketText&lt;/span&gt;(&lt;span style=&quot;color:#000000;&quot;&gt;String &lt;/span&gt;message) {&lt;br&gt;        &lt;span style=&quot;color:#0033b3;&quot;&gt;try &lt;/span&gt;{&lt;br&gt;            &lt;span style=&quot;color:#851691;&quot;&gt;session&lt;/span&gt;.text(message);&lt;br&gt;        } &lt;span style=&quot;color:#0033b3;&quot;&gt;catch &lt;/span&gt;(&lt;span style=&quot;color:#000000;&quot;&gt;IOException &lt;/span&gt;x) {&lt;br&gt;            &lt;span style=&quot;color:#851691;&quot;&gt;session&lt;/span&gt;.error(x);&lt;br&gt;        }&lt;br&gt;    }&lt;br&gt;}&lt;/pre&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="1">
          <mxGeometry x="120" y="240" width="620" height="800" as="geometry" />
        </mxCell>
        <mxCell id="5YAw_FNIZ0tjdUvr30zQ-3" value="&lt;pre style=&quot;background-color:#ffffff;color:#080808;font-family:&#39;JetBrains Mono&#39;,monospace;font-size:9.8pt;&quot;&gt;new &lt;span style=&quot;color:#000000;&quot;&gt;WebSocketListener&lt;/span&gt;() {&lt;br&gt;    &lt;span style=&quot;color:#9e880d;&quot;&gt;@Override&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#9e880d;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color:#0033b3;&quot;&gt;public void &lt;/span&gt;&lt;span style=&quot;color:#00627a;&quot;&gt;onWebSocketBinary&lt;/span&gt;(&lt;span style=&quot;color:#0033b3;&quot;&gt;byte&lt;/span&gt;[] payload, &lt;span style=&quot;color:#0033b3;&quot;&gt;int &lt;/span&gt;offset, &lt;span style=&quot;color:#0033b3;&quot;&gt;int &lt;/span&gt;length) {&lt;br&gt;        &lt;span style=&quot;color:#851691;&quot;&gt;listener&lt;/span&gt;.onWebSocketBinary(payload, offset, length);&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span style=&quot;color:#9e880d;&quot;&gt;@Override&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#9e880d;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color:#0033b3;&quot;&gt;public void &lt;/span&gt;&lt;span style=&quot;color:#00627a;&quot;&gt;onWebSocketText&lt;/span&gt;(&lt;span style=&quot;color:#000000;&quot;&gt;String &lt;/span&gt;message) {&lt;br&gt;        &lt;span style=&quot;color:#851691;&quot;&gt;listener&lt;/span&gt;.onWebSocketText(message);&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span style=&quot;color:#9e880d;&quot;&gt;@Override&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#9e880d;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color:#0033b3;&quot;&gt;public void &lt;/span&gt;&lt;span style=&quot;color:#00627a;&quot;&gt;onWebSocketClose&lt;/span&gt;(&lt;span style=&quot;color:#0033b3;&quot;&gt;int &lt;/span&gt;statusCode, &lt;span style=&quot;color:#000000;&quot;&gt;String &lt;/span&gt;reason) {&lt;br&gt;        &lt;span style=&quot;color:#851691;&quot;&gt;listener&lt;/span&gt;.onWebSocketClose(statusCode, reason);&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span style=&quot;color:#9e880d;&quot;&gt;@Override&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#9e880d;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color:#0033b3;&quot;&gt;public void &lt;/span&gt;&lt;span style=&quot;color:#00627a;&quot;&gt;onWebSocketConnect&lt;/span&gt;(&lt;span style=&quot;color:#000000;&quot;&gt;Session &lt;/span&gt;session) {&lt;br&gt;        &lt;span style=&quot;color:#851691;&quot;&gt;listener&lt;/span&gt;.onWebSocketConnect(session);&lt;br&gt;    }&lt;br&gt;&lt;br&gt;    &lt;span style=&quot;color:#9e880d;&quot;&gt;@Override&lt;br&gt;&lt;/span&gt;&lt;span style=&quot;color:#9e880d;&quot;&gt;    &lt;/span&gt;&lt;span style=&quot;color:#0033b3;&quot;&gt;public void &lt;/span&gt;&lt;span style=&quot;color:#00627a;&quot;&gt;onWebSocketError&lt;/span&gt;(&lt;span style=&quot;color:#000000;&quot;&gt;Throwable &lt;/span&gt;cause) {&lt;br&gt;        &lt;span style=&quot;color:#851691;&quot;&gt;listener&lt;/span&gt;.onWebSocketError(cause);&lt;br&gt;    }&lt;br&gt;};&lt;/pre&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="1">
          <mxGeometry x="120" y="1080" width="620" height="460" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
